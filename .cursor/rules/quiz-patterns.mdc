# Quiz System & Learning Patterns

## Quiz Architecture

Based on [rewrite.plan.md](mdc:rewrite.plan.md) relational quiz structure with auto-generated content.

## Quiz Data Structure

### Question Types

```typescript
type QuestionType = 
  | 'multiple_choice'    // What does "μέσα" mean?
  | 'translation'        // Translate: "I go to work"
  | 'fill_blank'        // Complete: "μου ______" (like/dislike)
  | 'pronunciation'     // How do you say "outside"?
```

### Relational Quiz Structure (No JSONB)

```typescript
interface QuizQuestion {
  id: number;
  question_type: QuestionType;
  question_text: string;
  correct_answer: string;
  explanation?: string;
  difficulty: 1 | 2 | 3 | 4 | 5;
  tags: string[];
}

interface QuizOption {
  id: number;
  question_id: number;
  option_text: string;
  is_correct: boolean;
  order_index: number;
}
```

## Auto-Generation Patterns

### From Vocabulary Data

```typescript
// Generate "What does X mean?" questions
const vocabularyQuiz = vocabulary.map(word => ({
  question_type: 'multiple_choice',
  question_text: `What does "${word.greek_text}" mean in English?`,
  correct_answer: word.english_translation,
  explanation: `${word.greek_text} (${word.pronunciation}) means ${word.english_translation}`,
  options: generateDistractors(word.english_translation, word.category)
}));
```

### From Grammar Rules

```typescript
// Generate grammar pattern questions
const grammarQuiz = grammarRules.map(rule => ({
  question_type: 'fill_blank',
  question_text: `Complete the pattern: ${rule.pattern.replace(/μου/, '_____')}`,
  correct_answer: 'μου',
  explanation: rule.description
}));
```

## Learning Progression

### Difficulty Scaling

1. **Level 1** - Basic vocabulary recognition
2. **Level 2** - Grammar pattern completion  
3. **Level 3** - Translation tasks
4. **Level 4** - Complex sentence construction
5. **Level 5** - Contextual usage

### Spaced Repetition Logic

```typescript
interface UserProgress {
  question_id: number;
  last_attempted: Date;
  success_rate: number;
  next_review: Date;
  attempts: number;
}
```

## Quiz Generation Rules

### Content Sources

- **Directional words** from [8 July.md](mdc:8 July.md) → spatial relationship quizzes
- **Verb conjugations** from `src/constants/verbs.ts` → conjugation practice
- **Case patterns** from `src/constants/articles.ts` → case recognition quizzes
- **Grammar rules** → pattern completion exercises

### Question Distribution

- 40% Vocabulary recognition
- 30% Grammar pattern completion
- 20% Translation tasks
- 10% Pronunciation/listening

## Analytics & Progress

### Track Learning Metrics

```typescript
interface QuizAnalytics {
  total_questions: number;
  correct_answers: number;
  average_time_per_question: number;
  weak_categories: string[];
  improvement_areas: string[];
}
```

### Adaptive Learning

- Increase difficulty on consistent success
- Repeat challenging concepts more frequently
- Focus on weak vocabulary categories
- Adjust question types based on performance

## Required Implementation Patterns

1. **Relational structure** - questions + options tables, no JSONB
2. **Auto-generation** - create quizzes from existing vocabulary/grammar data
3. **Progress tracking** - detailed analytics per question/category
4. **Adaptive difficulty** - adjust based on user performance
5. **Category focus** - target weak areas for additional practice
